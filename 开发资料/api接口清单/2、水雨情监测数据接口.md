# 流域水雨情监测数据接口文档

## 概述

本文档描述了卫共数字孪生流域防洪预报预演系统的水雨情监测相关API接口，用于查询**实时监测数据和历史过程数据**，包括雨量监测、水库水情、河道水情、智能监测设备数据、视频预览等。接口基础地址为：<http://10.20.2.153>

## 接口分类概览

本文档共包含 **15个API接口**，按功能分类如下：

### 一、雨情监测接口（3个）

1. 雨量过程数据查询接口
2. 雨量统计数据查询接口
3. 雨量累计查询接口

### 二、水库水情监测接口（2个）

4. 水库最新水情查询接口
5. 水库水情过程查询接口

### 三、河道水情监测接口（2个）

6. 河道最新水情查询接口
7. 河道水情过程查询接口

### 四、AI智能监测数据接口（4个）

8. AI水情最新数据查询接口
9. AI水情过程数据查询接口
10. AI雨量最新数据查询接口
11. AI雨量过程数据查询接口

### 五、视频监控接口（1个）

12. 视频监控预览接口

### 六、传感器监测接口（1个）

13. 传感器数据过程查询接口

### 七、无人机监测接口（1个）

14. 无人机设备状态查询接口

### 八、告警短信接口（1个）

15. 短信发送接口

---

## 统一响应格式

所有接口返回统一的JSON格式：

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": {}
}
```

错误时返回：

```json
{
    "success": false,
    "code": "错误码",
    "message": "错误信息",
    "data": null
}
```

---

## 接口列表

### 一、雨量监测接口

### 1. 雨量过程数据查询接口

**用途**: 根据测站编码和时间范围查询雨量历史过程数据

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/rain/processList`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| STCD | String | 是 | 测站编码 |
| searchBeginTime | String | 是 | 查询开始时间，格式：yyyy-MM-dd HH:mm:ss |
| searchEndTime | String | 是 | 查询结束时间，格式：yyyy-MM-dd HH:mm:ss |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "tm": "数据时间",
            "drp": "时段降水量(mm)",
            "intv": "时段长(min)",
            "pdr": "日降水量(mm)",
            "dyp": "日降水量(mm)",
            "accp": "累计降水量(mm)"
        }
    ]
}
```

---

### 2. 雨量统计数据查询接口

**用途**: 根据测站编码查询雨量统计数据，包含1小时、3小时、6小时、12小时、24小时等多时段的雨量统计信息

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/rain/statistics`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| STCD | String | 是 | 测站编码 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": {
        "1hour": [
            {
                "stcd": "测站编码",
                "stnm": "测站名称",
                "lgtd": "经度",
                "lttd": "纬度",
                "accp": "累计降水量(mm)",
                "tm": "数据时间",
                "drp": "时段降水量(mm)",
                "sttp": "测站类型"
            }
        ],
        "3hour": [],
        "6hour": [],
        "12hour": [],
        "24hour": []
    }
}
```

**输出结果样例**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": {
        "1hour": [
            {
                "lgtd": 114.037251,
                "lttd": 35.407871,
                "stnm": "汲县",
                "addvcd": "410781",
                "sttp": "ZQ",
                "accp": null,
                "rvnm": "卫河",
                "stcd": "31003600",
                "tm": null,
                "drp": null
            }
        ]
    }
}
```

---

### 3. 雨量累计查询接口

**用途**: 根据时间范围查询所有测站的雨量累计数据

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/rain/sum`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| searchBeginTime | String | 是 | 查询开始时间，格式：yyyy-MM-dd HH:mm:ss |
| searchEndTime | String | 是 | 查询结束时间，格式：yyyy-MM-dd HH:mm:ss |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "stnm": "测站名称",
            "lgtd": "经度",
            "lttd": "纬度",
            "accp": "累计降水量(mm)",
            "sttp": "测站类型",
            "rvnm": "河流名称",
            "hnnm": "水系名称",
            "bsnm": "流域名称",
            "stlc": "测站位置"
        }
    ]
}
```

**输出结果样例**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "lgtd": 113.427169,
            "lttd": 35.91514,
            "stnm": "福头",
            "addvcd": "140427",
            "sttp": "PP",
            "accp": 0.0,
            "rvnm": "淅河",
            "hnnm": "南运河",
            "bsnm": "海河",
            "stlc": "壶关县树掌镇福头村",
            "stcd": "31023138"
        }
    ]
}
```

---

### 二、水库水情监测接口

### 4. 水库最新水情查询接口

**用途**: 获取所有水库的最新实时水情数据，包括水位、蓄水量、入库流量、出库流量等

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/rsvr/last`

**输入参数**: 
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| stcd | String | 否 | 测站编码 |


**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "stnm": "测站名称",
            "lgtd": "经度",
            "lttd": "纬度",
            "rz": "库水位(m)",
            "w": "蓄水量(万m³)",
            "inq": "入库流量(m³/s)",
            "otq": "出库流量(m³/s)",
            "tm": "数据时间",
            "rvnm": "河流名称",
            "hnnm": "水系名称",
            "bsnm": "流域名称",
            "stlc": "测站位置"
        }
    ]
}
```

**输出结果样例**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "lgtd": 113.1415,
            "lttd": 35.363,
            "stnm": "群英",
            "warn": null,
            "addvcd": "410821",
            "sttp": "RR",
            "rvnm": "大沙河",
            "hnnm": "漳卫南运河",
            "bsnm": "海河",
            "stlc": "焦作市修武县群英水库",
            "rz": 476.94,
            "stcd": "31004600",
            "tm": "2025-12-11 08:00:00",
            "w": 9.61,
            "otq": 1.03,
            "rwptn": "4",
            "inq": 1.0,
            "inqdr": 24.0,
            "msqmt": "1"
        }
    ]
}
```

---

### 5. 水库水情过程查询接口

**用途**: 根据测站编码和时间范围查询水库的历史水情过程数据

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/rsvr/processList`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| STCD | String | 是 | 测站编码 |
| searchBeginTime | String | 是 | 查询开始时间，格式：yyyy-MM-dd HH:mm:ss |
| searchEndTime | String | 是 | 查询结束时间，格式：yyyy-MM-dd HH:mm:ss |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "tm": "数据时间",
            "rz": "库水位(m)",
            "w": "蓄水量(万m³)",
            "inq": "入库流量(m³/s)",
            "otq": "出库流量(m³/s)"
        }
    ]
}
```

**输出结果样例**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "rz": 302.4,
            "stcd": "31005200",
            "tm": "2025-12-11 08:00:00",
            "w": 22.644,
            "otq": 2.7,
            "rwptn": "4",
            "inq": null
        }
    ]
}
```

---

### 三、河道水情监测接口

### 6. 河道最新水情查询接口

**用途**: 获取所有河道测站的最新实时水情数据，包括水位、流量等

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/river/last`

**输入参数**: 
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| stcd | String | 否 | 测站编码 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "stnm": "测站名称",
            "lgtd": "经度",
            "lttd": "纬度",
            "z": "水位(m)",
            "q": "流量(m³/s)",
            "tm": "数据时间",
            "sttp": "测站类型",
            "rvnm": "河流名称",
            "hnnm": "水系名称",
            "bsnm": "流域名称",
            "stlc": "测站位置",
            "wptn": "水势",
            "warn": "告警级别"
        }
    ]
}
```

**输出结果样例**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "lgtd": 114.037251,
            "lttd": 35.407871,
            "stnm": "汲县",
            "warn": null,
            "addvcd": "410781",
            "sttp": "ZQ",
            "stazt": "55",
            "rvnm": "卫河",
            "hnnm": "南运河",
            "bsnm": "海河",
            "stlc": "豫-卫辉",
            "q": 2.49,
            "stcd": "31003600",
            "z": 64.42,
            "tm": "2025-12-12 08:00:00",
            "wptn": "5",
            "flwchrcd": null
        }
    ]
}
```

---

### 7. 河道水情过程查询接口

**用途**: 根据测站编码和时间范围查询河道水情历史过程数据

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/river/processList`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| STCD | String | 是 | 测站编码 |
| searchBeginTime | String | 是 | 查询开始时间，格式：yyyy-MM-dd HH:mm:ss |
| searchEndTime | String | 是 | 查询结束时间，格式：yyyy-MM-dd HH:mm:ss |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "tm": "数据时间",
            "z": "水位(m)",
            "q": "流量(m³/s)",
            "wptn": "水势",
            "flwchrcd": "流量特征码"
        }
    ]
}
```

**输出结果样例**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "q": 2.53,
            "stcd": "31005700",
            "z": 97.71,
            "tm": "2025-12-10 08:00:00",
            "wptn": "4",
            "flwchrcd": null
        },
        {
            "q": 2.33,
            "stcd": "31005700",
            "z": 97.51,
            "tm": "2025-12-11 08:00:00",
            "wptn": "4",
            "flwchrcd": null
        }
    ]
}
```

---

### 四、AI智能监测数据接口

### 8. AI水情最新数据查询接口

**用途**: 获取AI智能监测设备的最新水情数据

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/monitor/ai/water/last`

**输入参数**: 无

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "stnm": "测站名称",
            "z": "水位(m)",
            "tm": "数据时间"
        }
    ]
}
```

---

### 9. AI水情过程数据查询接口

**用途**: 根据测站编码和时间范围查询AI智能监测设备的水情历史过程数据

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/monitor/ai/water/process`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| stcd | String | 是 | 测站编码 |
| st | String | 是 | 开始时间，格式：yyyy-MM-dd HH:mm:ss |
| ed | String | 是 | 结束时间，格式：yyyy-MM-dd HH:mm:ss |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "tm": "数据时间",
            "z": "水位(m)"
        }
    ]
}
```

---

### 10. AI雨量最新数据查询接口

**用途**: 获取AI智能监测设备的最新雨量数据

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/monitor/ai/rain/last`

**输入参数**: 无

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "stnm": "测站名称",
            "drp": "时段降水量(mm)",
            "tm": "数据时间"
        }
    ]
}
```

---

### 11. AI雨量过程数据查询接口

**用途**: 根据测站编码和时间范围查询AI智能监测设备的雨量历史过程数据

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/monitor/ai/rain/process`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| stcd | String | 是 | 测站编码 |
| st | String | 是 | 开始时间，格式：yyyy-MM-dd HH:mm:ss |
| ed | String | 是 | 结束时间，格式：yyyy-MM-dd HH:mm:ss |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "tm": "数据时间",
            "drp": "时段降水量(mm)"
        }
    ]
}
```

---

### 五、视频监控接口

### 12. 视频监控预览接口

**用途**: 根据摄像头编码获取实时视频预览地址

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/camera/preview`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| code | String | 是 | 摄像头编码 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": {
        "url": "视频预览流地址"
    }
}
```

---

### 六、传感器监测接口

### 13. 传感器数据过程查询接口

**用途**: 根据传感器ID和时间范围查询传感器的历史监测数据

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/monitor/sensor/data/process`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| sensorId | String | 是 | 传感器ID |
| st | String | 是 | 开始时间，格式：yyyy-MM-dd HH:mm:ss |
| ed | String | 是 | 结束时间，格式：yyyy-MM-dd HH:mm:ss |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "sensorId": "传感器ID",
            "tm": "数据时间",
            "value": "监测值"
        }
    ]
}
```

---

### 七、无人机监测接口

### 14. 无人机设备状态查询接口

**用途**: 查询大疆无人机设备的实时状态

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/djiuav/openapi/v0.1/device/{deviceSn}/state`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| deviceSn | String | 是 | 无人机设备序列号（URL路径参数） |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": {
        "deviceSn": "设备序列号",
        "status": "设备状态",
        "battery": "电量(%)",
        "location": {
            "lng": "经度",
            "lat": "纬度",
            "alt": "高度(m)"
        }
    }
}
```

---

### 八、告警短信接口

### 15. 短信发送接口

**用途**: 发送告警短信通知

**请求方式**: POST

**请求地址**: `http://10.20.2.153/api/basin/modelPlatf/sms/sendMsg`

**输入参数**:

- Content-Type: application/json
- 请求体JSON对象:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| phone | String | 是 | 接收短信的手机号码 |
| content | String | 是 | 短信内容 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": null
}
```

---

## 附录

### A. 日期格式说明

所有日期参数格式为: `yyyy-MM-dd HH:mm:ss`
示例: `2025-12-01 00:00:00`

### B. 状态码说明

- 00000: 请求成功
- 200: 请求成功（部分接口）
- 其他: 错误码

### C. 测站类型（sttp）说明

- ZQ: 水文站
- ZZ: 水位站
- RR: 水库站
- PP: 雨量站
- DD: 闸坝站
- ZB: 水位遥测站
- AI: AI智能监测站

### D. 水势（wptn）说明

- 1: 涨
- 2: 落
- 3: 平
- 4: 缓涨
- 5: 缓落
- 6: 平稳
