# 卫共流域基本信息获取接口文档

## 概述

本文档描述了卫共数字孪生流域防洪预报预演系统的流域基本信息获取相关API接口，用于查询流域内测站基础信息、水库/水闸配置参数、蓄滞洪区信息、设备列表等**静态或配置类**信息。接口基础地址为：<http://10.20.2.153>

## 接口分类概览

本文档共包含 **14个API接口**，按功能分类如下：

### 一、地图数据源接口（2个）

1. 地图数据源查询接口
2. 列表数据源查询接口

### 二、水库基础信息接口（3个）

3. 水库基础信息查询接口
4. 水库防洪特征值详情查询接口
5. 水库防洪特征值列表查询接口

### 三、水闸堰基础信息接口（2个）

6. 水闸基础信息查询接口
7. 分洪闸堰信息查询接口

### 四、蓄滞洪区接口（1个）

8. 蓄滞洪区信息查询接口

### 五、河道基础信息接口（1个）

9. 河道防洪特征值列表查询接口

### 六、测站基础信息接口（1个）

10. 测站列表查询接口

### 七、视频监控基础信息接口（1个）

11. 视频监控列表查询接口

### 八、无人机基础信息接口（2个）

12. 无人机项目列表查询接口
13. 无人机项目设备列表查询接口

### 九、遥感任务接口（1个）

14. 遥感任务列表查询接口

---

## 统一响应格式

所有接口返回统一的JSON格式：

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": {}
}
```

错误时返回：

```json
{
    "success": false,
    "code": "错误码",
    "message": "错误信息",
    "data": null
}
```

---

## 接口列表

### 一、地图数据源接口

### 1. 地图数据源查询接口

**用途**: 查询各类地理要素的地图数据（包含空间坐标shape字段），支持测站、水库、蓄滞洪区、分洪闸堰等多种类型的查询

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/map/dataSource/table/map`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| refTable | String | 是 | 数据表名，可选值见下方说明 |
| where[0][filed] | String | 否 | 查询字段名 |
| where[0][rela] | String | 否 | 关系运算符（=, in, like等） |
| where[0][value] | String | 否 | 查询值 |

**refTable可选值**:

- `geo_st_base` - 测站基础信息
- `geo_res_base` - 水库基础信息
- `geo_fld_stor` - 蓄滞洪区基础信息
- `geo_flo_dam` - 分洪闸堰基础信息

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "shape": "空间坐标（Point/Polygon等格式）",
            "stcd": "编码",
            "stnm": "名称",
            "...": "其他业务字段"
        }
    ]
}
```

---

### 2. 列表数据源查询接口

**用途**: 查询各类要素的列表数据（不含空间坐标），支持水库扩展信息、防洪责任人等查询

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/map/dataSource/table/list`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| refTable | String | 是 | 数据表名 |
| where[0][filed] | String | 否 | 查询字段名 |
| where[0][rela] | String | 否 | 关系运算符（=, in, like等） |
| where[0][value] | String | 否 | 查询值 |

**refTable可选值**:

- `geo_res_flood_ext` - 水库防洪责任人扩展信息

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "res_name": "水库名称",
            "res_code": "水库编码",
            "admin_name": "行政责任人姓名",
            "admin_org": "行政责任人单位",
            "admin_post": "行政责任人职务",
            "cd_name": "主管部门责任人姓名",
            "cd_org": "主管部门单位",
            "cd_post": "主管部门责任人职务",
            "mu_name": "管理单位责任人姓名",
            "mu_org": "管理单位",
            "mu_post": "管理单位责任人职务",
            "eng_grad": "工程等级"
        }
    ]
}
```

---

### 二、水库基础信息接口

### 3. 水库基础信息查询接口

**用途**: 查询水库的基础属性信息，包括位置、所属水系、工程等级、库容等静态配置

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/map/dataSource/table/map`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| refTable | String | 是 | 固定值：geo_res_base |
| where[0][filed] | String | 否 | 查询字段名（如stcd） |
| where[0][rela] | String | 否 | 关系运算符 |
| where[0][value] | String | 否 | 查询值 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "county": "所属县区",
            "dead_cap": "死库容",
            "res_name": "水库名称",
            "che_flo_sta": "校核洪水流量",
            "che_flo_lev": "校核洪水位",
            "main_dam_wav_wal_elev": "主坝波浪墙顶高程",
            "main_dam_top_len": "主坝坝顶长度",
            "wat_shed_area": "流域面积",
            "id": "唯一标识",
            "norm_pool_stag_cap": "正常蓄水位库容",
            "longitude": "经度",
            "tot_cap": "总库容",
            "ben_res_cap": "兴利库容",
            "stcd": "测站编码",
            "eng_grad": "工程等级",
            "shape": "空间坐标"
        }
    ]
}
```

---

### 4. 水库防洪特征值详情查询接口

**用途**: 根据测站编码查询单个水库的防洪特征值详情，包括校核洪水位、设计洪水位、正常蓄水位、死水位等

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/rsvr/fcch/detail`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| STCD | String | 是 | 测站编码 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": {
        "stcd": "测站编码",
        "damel": "坝顶高程(m)",
        "ckflz": "校核洪水位(m)",
        "dsflz": "设计洪水位(m)",
        "normz": "正常蓄水位(m)",
        "ddz": "死水位(m)",
        "actz": "实际蓄水位(m)",
        "ttcp": "总库容(亿m³)",
        "actcp": "实际蓄水库容(亿m³)",
        "ddcp": "死库容(亿m³)",
        "fsrs": "防汛限制水位信息数组"
    }
}
```

**输出结果样例**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": {
        "stcd": "31005200",
        "damel": 308.4,
        "ckflz": 308.0,
        "dsflz": 305.7,
        "normz": 305.2,
        "ddz": 251.5,
        "actz": 305.2,
        "ttcp": 27.73,
        "actcp": 24.19,
        "ddcp": 0.67,
        "rsvrtp": 3.0,
        "fsrs": [
            {
                "stcd": "31005200",
                "bgmd": "0601",
                "edmd": "0831",
                "fsltdz": 303.2,
                "fstp": "1"
            }
        ]
    }
}
```

---

### 5. 水库防洪特征值列表查询接口

**用途**: 获取所有水库的防洪特征值信息列表，包括校核洪水位、设计洪水位、正常蓄水位、死水位等

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/rsvr/fcch/list`

**输入参数**: 无

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "damel": "坝顶高程(m)",
            "ckflz": "校核洪水位(m)",
            "dsflz": "设计洪水位(m)",
            "normz": "正常蓄水位(m)",
            "ddz": "死水位(m)",
            "actz": "实际蓄水位(m)",
            "ttcp": "总库容(亿m³)",
            "actcp": "实际蓄水库容(亿m³)",
            "ddcp": "死库容(亿m³)",
            "fsrs": "防汛限制水位信息数组",
            "rsvrtp": "水库类型"
        }
    ]
}
```

**输出结果样例**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "31004600",
            "damel": 490.5,
            "ckflz": 486.86,
            "dsflz": 483.17,
            "normz": 477.0,
            "ddz": 425.0,
            "actz": 477.0,
            "ttcp": 17.43,
            "actcp": 12.47,
            "ddcp": 0.53,
            "hhrz": 479.62,
            "hhrztm": "2021-01-01 00:00:00",
            "rsvrtp": 3.0,
            "fsrs": [
                {
                    "stcd": "31004600",
                    "bgmd": "0515",
                    "edmd": "0930",
                    "fsltdz": 477.0,
                    "fstp": "1"
                }
            ]
        }
    ]
}
```

---

### 三、水闸堰基础信息接口

### 6. 水闸基础信息查询接口

**用途**: 查询水闸的基础属性信息，包括位置、所属水系、工程规模、设计流量等

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/map/dataSource/table/map`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| refTable | String | 是 | 固定值：geo_sluice_base |
| where[0][filed] | String | 否 | 查询字段名 |
| where[0][rela] | String | 否 | 关系运算符 |
| where[0][value] | String | 否 | 查询值 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "stnm": "水闸名称",
            "lgtd": "经度",
            "lttd": "纬度",
            "rvnm": "河流名称",
            "waga_func": "水闸功能",
            "eng_scal": "工程规模",
            "des_flo": "设计流量",
            "shape": "空间坐标"
        }
    ]
}
```

---

### 7. 分洪闸堰信息查询接口

**用途**: 查询分洪闸堰的基础信息，包括设计分洪流量、启用条件等

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/map/dataSource/table/map`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| refTable | String | 是 | 固定值：geo_flo_dam |
| where[0][filed] | String | 否 | 查询字段名 |
| where[0][rela] | String | 否 | 关系运算符 |
| where[0][value] | String | 否 | 查询值 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "id": "唯一标识",
            "name": "分洪闸名称",
            "lgtd": "经度",
            "lttd": "纬度",
            "des_flo_flow": "设计分洪流量",
            "shape": "空间坐标"
        }
    ]
}
```

---

### 四、蓄滞洪区接口

### 8. 蓄滞洪区信息查询接口

**用途**: 查询蓄滞洪区的基础信息，包括面积、进洪设施、设计蓄洪水位等

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/map/dataSource/table/map`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| refTable | String | 是 | 固定值：geo_fld_stor |
| where[0][filed] | String | 否 | 查询字段名 |
| where[0][rela] | String | 否 | 关系运算符 |
| where[0][value] | String | 否 | 查询值 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "name": "蓄滞洪区名称",
            "stcd": "编码",
            "area": "面积(km²)",
            "in_flo_faci": "进洪设施",
            "des_stor_capa": "设计蓄洪库容",
            "des_stor_lev": "设计蓄洪水位",
            "shape": "空间坐标"
        }
    ]
}
```

---

### 五、河道基础信息接口

### 9. 河道防洪特征值列表查询接口

**用途**: 获取所有河道测站的防洪特征值信息列表，包括警戒水位、保证水位等

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/river/fcch/list`

**输入参数**: 无

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "grz": "保证水位(m)",
            "wrz": "警戒水位(m)",
            "ldkel": "左堤高程(m)",
            "rdkel": "右堤高程(m)",
            "wrq": "警戒流量(m³/s)",
            "grq": "保证流量(m³/s)",
            "obhtz": "实测最高水位(m)",
            "obhtztm": "实测最高水位时间",
            "obmxq": "实测最大流量(m³/s)",
            "obmxqtm": "实测最大流量时间"
        }
    ]
}
```

**输出结果样例**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "31006900",
            "grz": "75.180",
            "wrz": "73.180",
            "ldkel": "76.070",
            "rdkel": "76.880",
            "grq": "1180.000",
            "obhtz": "76.420",
            "obhtztm": "1982-08-02 00:00:00",
            "obmxq": "2060.000",
            "obmxqtm": "1982-08-02 00:00:00"
        }
    ]
}
```

---

### 六、测站基础信息接口

### 10. 测站列表查询接口

**用途**: 按测站类型查询测站的基础信息列表

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/rwdb/station/list`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| STTP | String | 是 | 测站类型（ZQ-水文站、PP-雨量站、RR-水库站、AI-智能监测站等） |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "stcd": "测站编码",
            "stnm": "测站名称",
            "lgtd": "经度",
            "lttd": "纬度",
            "sttp": "测站类型",
            "stlc": "测站位置",
            "rvnm": "河流名称",
            "hnnm": "水系名称",
            "bsnm": "流域名称"
        }
    ]
}
```

---

### 七、视频监控基础信息接口

### 11. 视频监控列表查询接口

**用途**: 获取视频监控摄像头列表，可根据测站编码筛选

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/basin/camera/list`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| stcd | String | 否 | 测站编码，不传则查询所有摄像头 |

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "code": "摄像头编码",
            "name": "摄像头名称",
            "stcd": "关联测站编码",
            "url": "视频流地址"
        }
    ]
}
```

---

### 八、无人机基础信息接口

### 12. 无人机项目列表查询接口

**用途**: 查询无人机项目列表

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/djiuav/openapi/v0.1/project`

**输入参数**: 无

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "projectId": "项目ID",
            "projectName": "项目名称"
        }
    ]
}
```

---

### 13. 无人机项目设备列表查询接口

**用途**: 查询指定项目下的无人机设备列表

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/djiuav/openapi/v0.1/project/device`

**输入参数**: 无

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": [
        {
            "deviceSn": "设备序列号",
            "deviceName": "设备名称",
            "deviceType": "设备类型",
            "status": "设备状态"
        }
    ]
}
```

---

### 九、遥感任务接口

### 14. 遥感任务列表查询接口

**用途**: 查询各类遥感监测任务列表

**请求方式**: GET

**请求地址**: `http://10.20.2.153/api/rs/datamanager/task/getTaskList`

**输入参数**:

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| taskname | String | 否 | 任务名称，模糊查询 |
| tasktype | String | 是 | 任务类型（HHSL-洪涝水淹、HLJC-洪涝监测、SLGCBX-水利工程变形、XDMJC-小流域监测） |
| page | Integer | 是 | 页码，从1开始 |
| limit | Integer | 是 | 每页条数 |
| userId | String | 是 | 用户ID |

**任务类型说明**:

- HHSL: 洪涝水淹
- HLJC: 洪涝监测
- SLGCBX: 水利工程变形监测
- XDMJC: 小流域监测

**输出结果格式**:

```json
{
    "success": true,
    "code": "00000",
    "message": "请求成功",
    "data": {
        "total": "总数",
        "list": [
            {
                "taskId": "任务ID",
                "taskname": "任务名称",
                "tasktype": "任务类型",
                "status": "任务状态",
                "createTime": "创建时间"
            }
        ]
    }
}
```

---

## 附录

### A. 日期格式说明

所有日期参数格式为: `yyyy-MM-dd HH:mm:ss`
示例: `2025-12-01 00:00:00`

### B. 状态码说明

- 00000: 请求成功
- 200: 请求成功（部分接口）
- 其他: 错误码

### C. 测站类型（sttp）说明

- ZQ: 水文站
- ZZ: 水位站
- RR: 水库站
- PP: 雨量站
- DD: 闸坝站
- ZB: 水位遥测站
- AI: AI智能监测站

### D. 水库工程等级（eng_grad）说明

- 1: 大（一）型
- 2: 大（二）型
- 3: 中型
- 4: 小（一）型
- 5: 小（二）型

### E. 通用查询条件说明

接口支持通用查询条件格式：

- `where[0][filed]`: 查询字段名
- `where[0][rela]`: 关系运算符（=, in, like, >, <等）
- `where[0][value]`: 查询值

支持多个条件组合：

- `where[0][filed]=stcd&where[0][rela]==&where[0][value]='31005650'`
- `where[1][filed]=sttp&where[1][rela]==&where[1][value]='RR'`
